\documentclass[11pt]{article}

\include{packages}

\begin{document}

% ========== Edit your name here
%\author{Your Name}
\title{\coursename~Quiz 8: Due by \DueDate{\coursedate}{65}}
\date{}
\maketitle

\medskip

% ========== Begin answering questions here

\section*{Exercises}

\begin{enumerate}
\item Enhanced futures (4 credits): \\
HPX implements following two additional \lstinline|future| variants
\begin{itemize}
\item \lstinline|hpx::shared_future|
\item \lstinline|hpx::make_ready_future|
\end{itemize}
Please explain why HPX provides these additional future variants. Try to make a small example, where these are needed.

\section*{Programming exercise}

\begin{itemize}
\item Using dataflow (4 credits): \\
Replace the \lstinline|hpx::when_all(futures).then()| by hpx::dataflow. Note that the function \lstinline|square| is defined in the next source code listing.
\begin{lstlisting}
run_hpx([](){

std::vector<hpx::lcos::future<int>> futures;
futures.push_back(hpx::async(square,10));
futures.push_back(hpx::async(square,100));

hpx::when_all(futures).then([](auto&& f){
    std::vector<hpx::lcos::future<int>> futures = f.get();
    int result = 0;
    for(size_t i = 0; i < futures.size();i++)
        result += futures[i].get();
    std::cout << result << std::endl;
});

});
\end{lstlisting}

\item Unwrapping futures: (2 credits)\\
In the code below are two comments and two lines of code are missing there. Please add the two missing lines of code.
\begin{lstlisting}
// Evaluate the result and print the result
void sum(int first, int second){
	std::cout << first + second << std::endl;
}
// Compute the square 
int square(int a)
{
return a*a ;
}

int main(){
	std::vector<hpx::lcos::future<int>> futures;
	futures.push_back(hpx::async(square,10));
	futures.push_back(hpx::async(square,100));
	
	// Unwrapp the function sum
	
	// Use dataflow to execute the function asynchronously.
	
		
	return 0;
}
\end{lstlisting} 
\end{itemize}

% ========== Continue adding items as needed

\end{enumerate}
\doclicenseThis 

\end{document}
\grid
\grid
